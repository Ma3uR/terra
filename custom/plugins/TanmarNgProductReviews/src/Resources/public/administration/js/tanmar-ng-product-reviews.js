(this.webpackJsonp=this.webpackJsonp||[]).push([["tanmar-ng-product-reviews"],{"6/4J":function(n,e){n.exports='{% block tanmar_productreviews %}\n    <sw-page class="tanmar-productreviews">\n\n        {% block tanmar_productreviews_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                        {{ $tc(\'tanmar-productreviews.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block tanmar_productreviews_actions %}\n            <template #smart-bar-actions>\n                {% block tanmar_productreviews_actions_save %}\n                    <sw-button-process v-model="isSaveSuccessful"\n                                       class="sw-settings-login-registration__save-action"\n                                       variant="primary"\n                                       :isLoading="isLoading"\n                                       :disabled="isLoading || savingDisabled || hasError || !acl.can(\'tanmar-productreviews.editor\')"\n                                       @click="onSave">\n                        {{ $tc(\'tanmar-productreviews.settingForm.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        {% block tanmar_productreviews_content %}\n            <template #content>\n\n                {% block tanmar_productreviews_content_card %}\n                    <sw-card-view>\n\n                        {% block tanmar_productreviews_content_card_channel_config %}\n                            <sw-sales-channel-config v-model="config"\n                                                     ref="configComponent"\n                                                     domain="TanmarNgProductReviews.settings">\n\n                                {% block tanmar_productreviews_content_card_channel_config_sales_channel %}\n                                    <template #select="{ onInput, selectedSalesChannelId }">\n\n                                        {% block tanmar_productreviews_content_card_channel_config_sales_channel_card %}\n                                            <sw-card :title="$tc(\'global.entities.sales_channel\', 2)">\n\n                                                {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_title %}\n                                                    <sw-single-select v-model="selectedSalesChannelId"\n                                                                      labelProperty="translated.name"\n                                                                      valueProperty="id"\n                                                                      :isLoading="isLoading"\n                                                                      :options="salesChannels"\n                                                                      :disabled="!acl.can(\'tanmar-productreviews.editor\')"\n                                                                      @change="onInput">\n                                                    </sw-single-select>\n                                                {% endblock %}\n\n                                                {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer %}\n                                                    <template #footer>\n\n                                                            {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container %}\n                                                                <sw-container columns="2fr 1fr" gap="5px 30px">\n\n                                                                    {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_invitation %}\n                                                                        {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_invitation_text %}\n                                                                            <p>{{ $tc(\'tanmar-productreviews.mail.invitation.description\') }}</p>\n                                                                        {% endblock %}\n\n                                                                        {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_invitation_button %}\n                                                                            <sw-button-process\n                                                                                               :isLoading="isLoading"\n                                                                                               :disabled="!acl.can(\'tanmar-productreviews.editor\')"\n                                                                                               @click="testInvitation">\n                                                                                {{ $tc(\'tanmar-productreviews.mail.invitation.label\') }}\n                                                                            </sw-button-process>\n                                                                        {% endblock %}\n                                                                    {% endblock %}\n\n\n                                                                    {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_notification %}\n\n                                                                            {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_notification_text %}\n                                                                                <p>{{ $tc(\'tanmar-productreviews.mail.notification.description\') }}</p>\n                                                                            {% endblock %}\n\n                                                                            {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_notification_button %}\n                                                                                <sw-button-process\n                                                                                                   :isLoading="isLoading"\n                                                                                                   :disabled="!acl.can(\'tanmar-productreviews.editor\')"\n                                                                                                   @click="testNotification">\n                                                                                    {{ $tc(\'tanmar-productreviews.mail.notification.label\') }}\n                                                                                </sw-button-process>\n                                                                            {% endblock %}\n\n                                                                    {% endblock %}\n\n\n                                                                    {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_coupon %}\n                                                                            {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_coupon_text %}\n                                                                                <p>{{ $tc(\'tanmar-productreviews.mail.coupon.description\') }}</p>\n                                                                            {% endblock %}\n\n                                                                            {% block tanmar_productreviews_content_card_channel_config_sales_channel_card_footer_container_coupon_button %}\n                                                                                <sw-button-process\n                                                                                                   :isLoading="isLoading"\n                                                                                                   :disabled="!acl.can(\'tanmar-productreviews.editor\')"\n                                                                                                   @click="testCoupon">\n                                                                                    {{ $tc(\'tanmar-productreviews.mail.coupon.label\') }}\n                                                                                </sw-button-process>\n                                                                            {% endblock %}\n                                                                    {% endblock %}\n\n                                                                </sw-container>\n                                                            {% endblock %}\n                                                    </template>\n                                                {% endblock %}\n\n                                            </sw-card>\n                                        {% endblock %}\n\n                                    </template>\n                                {% endblock %}\n\n                            </sw-sales-channel-config>\n\n\n                            {% block tanmar_productreviews_system_config %}\n                                <sw-system-config :domain="domain"\n                                                  :salesChannelId="salesChannelId"\n                                                  ref="systemConfig">\n                                </sw-system-config>\n                            {% endblock %}\n                        {% endblock %}\n\n                        {% block tanmar_productreviews_content_card_loading %}\n                            <sw-loader v-if="isLoading"></sw-loader>\n                            {% endblock %}\n\n                    </sw-card-view>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n\n    </sw-page>\n{% endblock %}\n'},MH06:function(n,e){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"tanmar_productreviews",key:"tanmar_productreviews",roles:{viewer:{privileges:["sales_channel:read","sales_channel_payment_method:read","system_config:read"],dependencies:[]},editor:{privileges:["sales_channel:update","sales_channel_payment_method:create","sales_channel_payment_method:update","system_config:update","system_config:create","system_config:delete"],dependencies:["tanmar_productreviews.viewer"]}}}),Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:null,key:"sales_channel",roles:{viewer:{privileges:["tanmar_productreviews_pos_sales_channel:read","tanmar_productreviews_pos_sales_channel_run:read","tanmar_productreviews_pos_sales_channel_run:update","tanmar_productreviews_pos_sales_channel_run:create"]},editor:{privileges:["tanmar_productreviews_pos_sales_channel:update","tanmar_productreviews_pos_sales_channel_run:delete"]},creator:{privileges:["tanmar_productreviews_pos_sales_channel:create"]},deleter:{privileges:["tanmar_productreviews_pos_sales_channel:delete"]}}})},PVV9:function(n,e,t){"use strict";function a(n){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function i(n,e){return(i=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function s(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,a=l(n);if(e){var o=l(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return c(this,t)}}function c(n,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function l(n){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}t.r(e);var d=Shopware.Classes.ApiService,u=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&i(n,e)}(l,n);var e,t,a,c=s(l);function l(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tanmar/productreviews/testmail";return o(this,l),c.call(this,n,e,t)}return e=l,(t=[{key:"testInvitation",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="_action/".concat(this.getApiBasePath(),"/invitation");return this.httpClient.post(e,{salesChannelId:n},{headers:this.getBasicHeaders()}).then((function(n){return d.handleResponse(n)}))}},{key:"testNotification",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="_action/".concat(this.getApiBasePath(),"/notification");return this.httpClient.post(e,{salesChannelId:n},{headers:this.getBasicHeaders()}).then((function(n){return d.handleResponse(n)}))}},{key:"testCoupon",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="_action/".concat(this.getApiBasePath(),"/coupon");return this.httpClient.post(e,{salesChannelId:n},{headers:this.getBasicHeaders()}).then((function(n){return d.handleResponse(n)}))}}])&&r(e.prototype,t),a&&r(e,a),l}(d),p=Shopware.Application,_=p.getContainer("init");p.addServiceProvider("TanmarNgProductReviewsTestmailApiService",(function(n){return new u(_.httpClient,n.loginService)}));t("MH06");var f=t("6/4J"),h=t.n(f),m=Shopware,v=m.Component,g=m.Defaults,w=Shopware.Data.Criteria;Shopware.Utils.object.hasOwnProperty;v.register("tanmar-productreviews",{template:h.a,inject:["TanmarNgProductReviewsTestmailApiService","repositoryFactory","acl"],mixins:["notification"],data:function(){return{isLoading:!1,isSaveSuccessful:!1,isTestSuccessful:!1,clientIdFilled:!1,salesChannels:[],config:null,isSetDefaultPaymentSuccessful:!0,isSettingDefaultPaymentMethods:!1,savingDisabled:!1,messageBlankErrorState:null,salesChannelId:null}},metaInfo:function(){return{title:this.$createTitle()}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},hasError:function(){return!1},domain:function(){return"TanmarNgProductReviews.config"}},watch:{config:{handler:function(){this.$refs.configComponent.allConfigs.null;this.salesChannelId=this.$refs.configComponent.selectedSalesChannelId,this.$refs.systemConfig.onSalesChannelChanged(this.salesChannelId)},deep:!0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var n=this;this.isLoading=!0;var e=new w;e.addFilter(w.equalsAny("typeId",[g.storefrontSalesChannelTypeId,g.apiSalesChannelTypeId])),this.salesChannelRepository.search(e,Shopware.Context.api).then((function(e){e.add({id:null,translated:{name:n.$tc("sw-sales-channel-switch.labelDefaultOption")}}),n.salesChannels=e})).finally((function(){n.isLoading=!1})),this.messageBlankErrorState={code:1,detail:this.$tc("swag-paypal.messageNotBlank")}},onSave:function(){this.hasError||this.save()},save:function(){var n=this;this.isLoading=!0,this.$refs.systemConfig.saveAll().then((function(){n.isSaveSuccessful=!0,n.createNotificationSuccess({message:n.$tc("sw-extension-store.component.sw-extension-config.messageSaveSuccess")})})).catch((function(e){n.createNotificationError({message:e})})).finally((function(){n.isLoading=!1}))},testInvitation:function(){var n=this;this.isLoading=!0,this.TanmarNgProductReviewsTestmailApiService.testInvitation(this.$refs.configComponent.selectedSalesChannelId).finally((function(){n.isLoading=!1}))},testNotification:function(){var n=this;this.isLoading=!0,this.TanmarNgProductReviewsTestmailApiService.testNotification(this.$refs.configComponent.selectedSalesChannelId).finally((function(){n.isLoading=!1}))},testCoupon:function(){var n=this;this.isLoading=!0,this.TanmarNgProductReviewsTestmailApiService.testCoupon(this.$refs.configComponent.selectedSalesChannelId).finally((function(){n.isLoading=!1}))},preventSave:function(n){this.savingDisabled=!!n}}});var b=t("lGpw"),y=t.n(b);Shopware.Component.register("tanmar-productreviews-settings-icon",{template:y.a}),Shopware.Module.register("tanmar-productreviews",{type:"plugin",name:"TanmarNgProductReviews",title:"tanmar-productreviews.general.mainMenuItemGeneral",description:"tanmar-productreviews.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"default-action-settings",routes:{index:{component:"tanmar-productreviews",path:"index",meta:{parentPath:"sw.settings.index",privilege:"tanmar_productreviews.viewer"}}},settingsItem:{group:"plugins",to:"tanmar.productreviews.index",iconComponent:"tanmar-productreviews-settings-icon",backgroundEnabled:!0,privilege:"tanmar_productreviews.viewer"},routeMiddleware:function(n,e){"sw.extension.config"===e.name&&(e.beforeEnter=function(n,e,t){"TanmarNgProductReviews"==n.params.namespace?t({name:"tanmar.productreviews.index"}):t()}),n(e)}})},lGpw:function(n,e){n.exports='{% block tanmar_productreviews_settings_icon %}\n    <sw-icon name="default-review-star-full" color="#ffcc00"></sw-icon>\n{% endblock %}\n'}},[["PVV9","runtime"]]]);
