(window.webpackJsonp=window.webpackJsonp||[]).push([["tanmar-ng-product-reviews"],{S3DR:function(e,t,n){"use strict";n.r(t);var r=n("FGIj"),a=n("k8s9"),o=n("5lm9"),i=n("2Jwc");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return s(this,t),u(this,d(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){window.tanmarDebug=this,this.starLegend={1:this.getStarLabel(1),2:this.getStarLabel(2),3:this.getStarLabel(3),4:this.getStarLabel(4),5:this.getStarLabel(5)},this._client=new a.a(window.accessKey),this.registerEvents()}},{key:"getStarLabel",value:function(e){var t=document.getElementById("tanmar-product-reviews-stars-legend"+e);return null!==t?t.innerHTML:""}},{key:"registerEvents",value:function(){var e=this;document.querySelectorAll(".stars .star").forEach((function(t){t.addEventListener("mouseenter",e.starEnter.bind(e)),t.addEventListener("touchstart",e.starEnter.bind(e)),t.addEventListener("mouseleave",e.starLeave.bind(e)),t.addEventListener("touchend",e.starLeave.bind(e)),t.addEventListener("click",e.starClick.bind(e))})),document.querySelectorAll("form.tanmarreviews").forEach((function(t){t.addEventListener("submit",e.formOnSubmit.bind(e))})),document.querySelectorAll('.topname input[type="checkbox"]').forEach((function(t){t.addEventListener("change",e.checkboxOnChange.bind(e))}))}},{key:"formOnSubmit",value:function(e){var t=this;e.preventDefault();var n=e.target,r=n.closest(".product"),a=document.createElement("div");a.classList.add("loading"),a.innerHTML=o.a.getTemplate(),r.appendChild(a);for(var i={},c=0;c<n.elements.length;c++){var s=n.elements[c];s.name&&!s.disabled&&"file"!==s.type&&"reset"!==s.type&&"submit"!==s.type&&"button"!==s.type&&("checkbox"!==s.type&&"radio"!==s.type||s.checked)&&(i[s.name]=s.value)}return i._csrf_token=document.getElementById("csrf").value,t._client.post(n.getAttribute("action"),JSON.stringify(i),t.formOnSubmitSuccess.bind([t,a])),!1}},{key:"formOnSubmitSuccess",value:function(e){var t=this[1],n=JSON.parse(e);if(void 0!==n&&void 0!==n.type)if("success"==n.type){t.classList.remove("loading"),t.classList.add("done");var r='<div role="alert" class="alert alert-success alert-has-icon">';r+='<span class="icon icon-info"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">',r+='<path fill="#758CA3" fill-rule="evenodd" d="M12,7 C12.5522847,7 13,7.44771525 13,8 C13,8.55228475 12.5522847,9 12,9 C11.4477153,9 11,8.55228475 11,8 C11,7.44771525 11.4477153,7 12,7 Z M13,16 C13,16.5522847 12.5522847,17 12,17 C11.4477153,17 11,16.5522847 11,16 L11,11 C11,10.4477153 11.4477153,10 12,10 C12.5522847,10 13,10.4477153 13,11 L13,16 Z M24,12 C24,18.627417 18.627417,24 12,24 C5.372583,24 6.14069502e-15,18.627417 5.32907052e-15,12 C-8.11624501e-16,5.372583 5.372583,4.77015075e-15 12,3.55271368e-15 C18.627417,5.58919772e-16 24,5.372583 24,12 Z M12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 Z"></path>',r+='</svg></span><div class="alert-content-container"><div class="alert-content">',r+=n.msg,r+="</div></div></div>",t.innerHTML=r;var a=t.closest(".product");a.style.height=a.getBoundingClientRect().height+"px",setTimeout(function(){this.classList.add("ready")}.bind(a),10),void 0!==n.voucher&&n.voucher&&location.reload(!0)}else t.parentNode.removeChild(t),new i.a(n.msg).open()}},{key:"starEnter",value:function(e){var t=this,n=e.target,r=n.parentElement;if(!r.classList.contains("selected")){var a=n.getAttribute("data-v");r.querySelectorAll("span").forEach((function(e){e.classList.remove("hover")}));for(var o=1;o<=parseInt(a,10);o++)r.querySelectorAll('.star[data-v="'+o+'"]').forEach((function(e){e.classList.add("hover")}));r.querySelectorAll(".star-legend").forEach((function(e){e.innerHTML=t.starLegend[a]}))}}},{key:"starLeave",value:function(e){var t=e.target.parentElement;t.classList.contains("selected")||(t.querySelectorAll("span").forEach((function(e){e.classList.remove("hover")})),t.querySelectorAll(".star-legend").forEach((function(e){e.innerHTML=""})))}},{key:"starClick",value:function(e){var t=this,n=e.target.closest(".star"),r=n.parentElement,a=n.getAttribute("data-v");r.querySelectorAll("span").forEach((function(e){e.classList.remove("selected","hover")}));for(var o=1;o<=parseInt(a,10);o++)r.querySelectorAll('.star[data-v="'+o+'"]').forEach((function(e){e.classList.add("selected")}));r.classList.add("selected"),r.querySelectorAll('.radiorating input[value="'+a+'"]').forEach((function(e){e.checked=!0})),r.querySelectorAll(".star-legend").forEach((function(e){e.innerHTML=t.starLegend[a]}))}},{key:"checkboxOnChange",value:function(e){var t=e.target.checked;document.querySelectorAll('.topname input[type="checkbox"]').forEach((function(e){e.checked=t}))}}])&&l(n.prototype,r),c&&l(n,c),t}(r.a);window.PluginManager.register("TanmarProductReviews",v)}},[["S3DR","runtime","vendor-node","vendor-shared"]]]);